# 智能合规审核系统 - 快速开始指南

## 系统概述

智能合规审核系统是一个基于规则匹配的合规审核工具，能够根据审核角色和单据类型自动匹配相关的法规条款。

## 已完成功能

### 1. 核心数据
- ✅ 6个法规文档（427条法规条款）
- ✅ 2个审核角色（商务管理员、厂领导）
- ✅ 1个单据类型（采购招标/比选/谈判/评审结论建议）
- ✅ 4条审核规则（角色-单据-条款关联）

### 2. API功能
- ✅ 条款匹配查询
- ✅ 角色和单据类型列表
- ✅ 法规文档列表
- ✅ 关键词搜索

## 使用说明

### 启动服务

```bash
cd backend
uvicorn app:app --reload --port 10000
```

服务启动后访问：http://localhost:10000/docs

### API示例

#### 1. 查询商务管理员的审核条款

```bash
curl "http://localhost:10000/api/match?role=商务管理员&document_type=采购招标/比选/谈判/评审结论建议"
```

**返回结果：**
- 第二十八条：采购人不得将应当以公开招标方式采购的货物或者服务化整为零...
- 第三十八条：采用竞争性谈判方式采购的，应当遵循下列程序...

#### 2. 查询厂领导的审核条款

```bash
curl "http://localhost:10000/api/match?role=厂领导&document_type=采购招标/比选/谈判/评审结论建议"
```

**返回结果：**
- 第三十六条：在招标采购中，出现下列情形之一的，应予废标...
- 第五十条：政府采购合同的双方当事人不得擅自变更、中止或者终止合同...

#### 3. 关键词搜索

```bash
curl "http://localhost:10000/api/search?keyword=公开招标&limit=10"
```

#### 4. 获取所有角色

```bash
curl "http://localhost:10000/api/roles"
```

#### 5. 获取所有单据类型

```bash
curl "http://localhost:10000/api/document-types"
```

#### 6. 获取所有法规

```bash
curl "http://localhost:10000/api/regulations"
```

## 项目结构

```
smart_compliance/
├── backend/
│   ├── app.py              # FastAPI应用主文件
│   ├── database.py         # 数据库模型定义
│   ├── parser.py           # 法规文档解析器
│   ├── matcher.py          # 条款匹配逻辑
│   ├── init_data.py        # 数据初始化脚本
│   ├── test_api.py         # API测试脚本
│   ├── requirements.txt    # Python依赖
│   └── data/
│       └── compliance.db   # SQLite数据库
├── regulations/            # 法规文档目录
│   ├── 中华人民共和国招标投标法_20171227.md
│   ├── 中华人民共和国政府采购法_20140831.md
│   ├── 中华人民共和国政府采购法实施条例_20150130.md
│   ├── 北京市招标投标条例_20210924.md
│   ├── 政府投资条例_20190414.md
│   └── 淄博市招标投标条例_20150522.md
└── README.md
```

## 数据库表结构

### regulations（法规文档表）
- id: 主键
- title: 法规标题
- source_file: 源文件路径

### clauses（条款表）
- id: 主键
- regulation_id: 所属法规ID
- clause_number: 条款编号（如：第二十八条）
- content: 条款内容

### auditor_roles（审核角色表）
- id: 主键
- role_name: 角色名称
- responsibilities: 职责描述

### document_types（单据类型表）
- id: 主键
- type_name: 单据类型名称
- description: 单据描述

### audit_rules（审核规则表）
- id: 主键
- role_id: 审核角色ID
- document_type_id: 单据类型ID
- clause_id: 条款ID
- source: 规则来源（example/manual/auto）
- priority: 优先级

## 测试验证

运行测试脚本：

```bash
cd backend
python test_api.py
```

测试脚本会自动执行以下测试：
1. ✅ 根路径和健康检查
2. ✅ 获取角色、单据类型、法规列表
3. ✅ 商务管理员条款匹配
4. ✅ 厂领导条款匹配
5. ✅ 关键词搜索

## 重新初始化数据

如果需要重新初始化数据库：

```bash
cd backend
rm -rf data/compliance.db  # 删除现有数据库
python init_data.py         # 重新初始化
```

## 下一步开发建议

### 1. 扩展数据
- 添加更多审核角色（如：财务管理员、技术负责人等）
- 添加更多单据类型（如：合同审批、付款申请等）
- 建立更多审核规则关联

### 2. 优化匹配算法
- 引入向量嵌入（Sentence-Transformers）
- 实现语义相似度匹配
- 集成LLM进行智能推荐

### 3. 开发前端界面
- 参考danduola.ai设计风格
- 实现角色和单据类型的动态管理
- 支持法规文档的上传和解析
- 可视化展示审核规则关系

### 4. 功能增强
- 用户权限管理
- 审核历史记录
- 条款收藏和标注
- 导出审核报告

## 技术支持

如有问题，请查看：
- API文档：http://localhost:10000/docs
- 项目README：../README.md
- 代码注释：各模块文件中的详细注释

## 版本信息

- **版本**: 1.0.0 (MVP)
- **发布日期**: 2025-12-31
- **Python版本**: 3.8+
- **数据库**: SQLite
- **框架**: FastAPI

(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,54858,e=>{"use strict";let t=e.i(47167).default.env.NEXT_PUBLIC_API_URL||"http://localhost:10000";async function s(e,s){let a=`${t}${e}`;try{let e=await fetch(a,{...s,headers:{"Content-Type":"application/json",...s?.headers}});if(!e.ok){let t=await e.json().catch(()=>({detail:"Unknown error"}));throw Error(t.detail||`HTTP ${e.status}`)}return await e.json()}catch(e){throw console.error("API request failed:",e),e}}async function a(e,t){let a=new URLSearchParams({role:e,document_type:t});return s(`/api/match?${a}`)}async function l(e,t=20){let a=new URLSearchParams({keyword:e,limit:t.toString()});return s(`/api/search?${a}`)}async function r(){return s("/api/roles")}async function n(){return s("/api/document-types")}async function i(){return s("/api/regulations")}async function c(){return s("/api/audit-rules")}e.s(["getAuditRules",()=>c,"getDocumentTypes",()=>n,"getRegulations",()=>i,"getRoles",()=>r,"matchClauses",()=>a,"searchClauses",()=>l])},22956,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(55436),l=e.i(78583),r=e.i(54858);function n(){let[e,n]=(0,s.useState)(""),[i,c]=(0,s.useState)([]),[o,u]=(0,s.useState)(!1),[d,m]=(0,s.useState)(!1),h=async t=>{if(t.preventDefault(),e.trim()){u(!0),m(!1);try{let t=await (0,r.searchClauses)(e,20);c(t.results),m(!0)}catch(e){console.error(e)}finally{u(!1)}}};return(0,t.jsx)("div",{className:"h-full overflow-y-auto p-8",children:(0,t.jsxs)("div",{className:"mx-auto max-w-4xl",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"关键词搜索"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"在所有法规条款中搜索包含指定关键词的内容"})]}),(0,t.jsx)("form",{onSubmit:h,className:"mb-8",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(a.Search,{className:"absolute left-4 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),(0,t.jsx)("input",{type:"text",value:e,onChange:e=>n(e.target.value),placeholder:"输入关键词搜索...",className:"block w-full rounded-lg border border-gray-300 pl-11 pr-4 py-3 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsx)("button",{type:"submit",disabled:o||!e.trim(),className:"rounded-lg bg-blue-600 px-8 py-3 font-medium text-white hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:o?"搜索中...":"搜索"})]})}),d&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"搜索结果"}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["找到 ",i.length," 条相关条款"]})]}),0===i.length?(0,t.jsxs)("div",{className:"rounded-lg border bg-white p-12 text-center",children:[(0,t.jsx)(l.FileText,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,t.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"未找到相关条款"}),(0,t.jsx)("p",{className:"mt-2 text-gray-500",children:"请尝试使用其他关键词"})]}):(0,t.jsx)("div",{className:"space-y-4",children:i.map((s,a)=>(0,t.jsxs)("div",{className:"rounded-lg border bg-white p-6 shadow-sm hover:shadow-md transition-shadow",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:s.regulation_title}),(0,t.jsx)("p",{className:"mt-1 text-sm font-medium text-blue-600",children:s.clause_number}),(0,t.jsx)("p",{className:"mt-3 text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:s.content.replace(RegExp(e,"gi"),e=>`<mark class="bg-yellow-200">${e}</mark>`)}})]},a))})]})]})})}e.s(["default",()=>n])}]);